name: openapi-validate

on:
  workflow_dispatch:   # MANUAL ONLY â€” prevents runner starvation

jobs:
  validate:
    runs-on: [self-hosted, Windows, X64, Builder-Rah]

    defaults:
      run:
        shell: pwsh

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Node
        uses: actions/setup-node@v4
        with:
          node-version: "20.x"

      - name: Validate OpenAPI spec
        run: ./scripts/validate-openapi.ps1

      - name: Validate OpenAPI client contract
        run: ./scripts/validate-openapi-client.ps1
