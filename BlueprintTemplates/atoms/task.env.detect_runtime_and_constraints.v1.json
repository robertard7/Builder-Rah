{
  "id": "task.env.detect_runtime_and_constraints.v1",
  "kind": "atom",
  "version": 1,
  "meta": { "visibility": "internal", "priority": 6 },
  "title": "Environment: detect runtime + constraints",
  "description": "Detects execution environment type and high-level constraints (host/container/wsl/remote) without binding to any provider, model, or toolchain.",
  "tags": ["env", "detect", "constraints", "internal"],
  "updatedUtc": "2025-12-28T00:00:00Z",
  "content": {
    "action": "detect_runtime",
    "inputs": ["planContext", "settingsSnapshot?"],
    "outputs": ["runtimeProfile", "constraints"],
    "rules": [
      "do not infer hardcoded paths",
      "do not reference specific providers/models/tools",
      "prefer explicit user settings when present",
      "emit constraints as abstract capabilities (filesystem, process, network, container, etc.)"
    ],
    "runtimeProfileSchema": {
      "name": "string",
      "type": "host_windows|host_linux|container_linux|wsl|remote",
      "notes": "string?"
    },
    "constraintsSchema": {
      "allowedCapabilities": ["string"],
      "deniedCapabilities": ["string"],
      "notes": "string?"
    }
  }
}
