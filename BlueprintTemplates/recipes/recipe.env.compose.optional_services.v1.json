{
  "id": "recipe.env.compose.optional_services.v1",
  "kind": "recipe",
  "version": 1,
  "meta": { "visibility": "public", "priority": 38 },
  "title": "Compose: Optional services placeholders",
  "description": "Adds docker-compose.yml with commented placeholder services (db/cache/queue) without selecting a vendor.",
  "tags": ["env", "compose", "services"],
  "updatedUtc": "2025-12-28T00:00:00Z",
  "content": { "steps": [
    { "use": "task.add_file.conflict_policy.v1", "with": {
      "path": "${projectRoot}/docker-compose.yml",
      "onConflict": "skip",
      "text": "version: '3.9'\nservices:\n  app:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    environment:\n      # configure via Settings/runtime\n      - APP_ENV=development\n    ports:\n      - \"${APP_PORT:-8080}:8080\"\n\n  # Optional database (choose vendor + settings)\n  # db:\n  #   image: <choose-db-image>\n  #   environment:\n  #     - DB_USER=<set>\n  #     - DB_PASS=<set>\n\n  # Optional cache (choose vendor + settings)\n  # cache:\n  #   image: <choose-cache-image>\n\n  # Optional queue (choose vendor + settings)\n  # queue:\n  #   image: <choose-queue-image>\n"
    } }
  ] }
}
