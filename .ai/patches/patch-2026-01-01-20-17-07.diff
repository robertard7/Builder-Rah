diff --git a/Workflow/WorkflowFacade.cs b/Workflow/WorkflowFacade.cs
index 65b00ed..d2d3f45 100644
--- a/Workflow/WorkflowFacade.cs
+++ b/Workflow/WorkflowFacade.cs
@@ -293,7 +293,7 @@ public sealed class WorkflowFacade
             EmitToolPlanWait();
     }
 
-    public async Task<RunnerBuildSummary> RunFromCodexAsync(CancellationToken ct)
+    public async Task<RunnerBuildSummary> RunFromCodexAsync(string userText, CancellationToken ct)
     {
         var repoScope = RepoScope.Resolve(_cfg);
         _trace.Emit(repoScope.Message);
@@ -303,6 +303,15 @@ public sealed class WorkflowFacade
         if (!EnsureProvidersConfigured() || !EnsureToolPromptsReady())
             return RunnerBuildSummary.Failed("validation_failed");
 
+        var mermaid = _cfg.WorkflowGraph.MermaidText ?? "";
+        var gv = _router.ValidateGraph(mermaid);
+        if (!gv.Ok)
+            return RunnerBuildSummary.Failed("graph_invalid", gv.Message);
+
+        var digest = await RunJobSpecDigestAsync(AppendAttachmentMetadata(userText), ct).ConfigureAwait(false);
+        if (!digest.IsComplete)
+            return RunnerBuildSummary.Failed("jobspec_incomplete", string.Join(", ", digest.GetMissingFields()));
+
         var repo = Environment.GetEnvironmentVariable("GITHUB_REPOSITORY") ?? "";
         if (string.IsNullOrWhiteSpace(repo))
             return RunnerBuildSummary.Failed("missing_repository", "Set GITHUB_REPOSITORY=owner/repo");
