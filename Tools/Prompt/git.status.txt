C:\dev\rah\RahOllamaOnly\Tools\Prompt\git.status.txt
TOOL ID:
git.status

CATEGORY:
git

PURPOSE:
Run `git status -sb` in a target directory (default /work) to show branch and working tree state.
Used to verify whether there are local changes, untracked files, or divergence from remote.

WHEN TO USE:
- You need to confirm whether the workspace has uncommitted changes.
- You need to see current branch and whether it is ahead/behind.
- You are about to build or patch and want to confirm a clean state.
- You want to identify untracked files generated by tools.
- You need to confirm you are in a git repo at a given path.

WHEN NOT TO USE:
- The directory is not a git repository: this will fail.
- You need a detailed diff: use git.diff.
- You need commit history: use git.log.
- You need status for multiple repos at once: run separately per path.
- You are unsure of the correct repo path: locate it with repo tools first.

INPUT PARAMETERS:
- {args} parsing:
  - {args} is captured as a single string into p="{args}".
  - No token splitting; p is used as a path string.
- Positional arguments:
  - 1st: <path> optional.
    - If omitted or empty, defaults to /work.
- Optional arguments:
  - <path>: directory to cd into before running git status.
- Defaults:
  - p defaults to /work when args empty.
- Error conditions:
  - If cd to p fails: exits 2.
  - If p is not a git repo: git status exits non-zero and prints error.
  - If git is not installed: command fails.
  - Permissions may prevent reading .git.

EXECUTION ENVIRONMENT:
- Runs inside rah-linux container.
- Working directory behavior:
  - Changes directory to p (or /work) before executing.
- File system assumptions:
  - Path must exist inside container.
  - Git repository should have a .git directory (or worktree metadata).

OUTPUT:
- stdout behavior:
  - Prints short status with branch info (`-sb`).
  - Shows staged/unstaged changes and untracked files in compact form.
- stderr behavior:
  - cd failure messages minimal; git errors (not a repo) appear here.
- exit codes and meanings:
  - 0: git status succeeded.
  - 2: could not cd into p (explicit tool behavior).
  - Non-zero: git status failed (not a repo, git missing, etc.).

SIDE EFFECTS:
- Files created/modified:
  - None.
- Network access:
  - None. git status is local only.
- Installed packages:
  - None.
- State changes:
  - None.

SAFETY RULES:
- MUST verify:
  - The path is a directory and is intended to be a git repository.
- MUST NEVER guess:
  - Never guess repo path; use repo.tree/finddir first if uncertain.
  - Never claim clean/dirty unless status output shows it.
- Requires user confirmation:
  - None. Read-only.

COMMON FAILURE MODES:
- Path is wrong; cd fails and exit 2 occurs.
- Path exists but is not a git repo; git prints “not a git repository”.
- /work contains multiple repos; status at /work may not reflect subrepos.
- Git not installed in container.

EXAMPLES:
1) git.status
2) git.status /work
3) git.status /work/RahOllamaOnly
4) git.status /work/MiniPad
5) git.status /work/SomeRepo

ANTI-HALLUCINATION NOTES:
- Do NOT claim there are changes unless git status output lists them.
- Do NOT claim branch name if it is not printed.
- Do NOT claim remote divergence unless status shows ahead/behind.
- Do NOT assume /work is a git repo; verify by output.
- If tool exits 2, it is a cd problem, not necessarily a git problem.
- Do NOT claim files are staged/unstaged without reading status output.
- Do NOT infer “safe to commit” from status alone; that is user intent.
- Do NOT invent untracked files; report only those shown.
- Do NOT translate paths into Windows.
- Do NOT run git commands not in manifest.
- If user needs full status, this tool is short status only; do not pretend it is full.
- Treat output as authoritative snapshot at that moment.
- If multiple repos exist, status only covers the chosen directory.
- Do not guess that “nothing changed” if command failed; command must succeed to conclude.
